# QUICK TEST CONFIG - for local debugging only
# Uses shorter sequences and fewer epochs for fast iteration

TRAIN_COMMAND: [ python, train.py ]
LOO_CV_COMMAND: [python, loo_cross_validation.py]

CLASSES:
  - { label: 0,  name: "Wake" }
  - { label: 1,  name: "Sleep" }

TRAIN_DATA: data/processed_test_data
VALID_SPLIT: 0.3  # Use 30% for validation
TEST_SUBJECTS: ['P005.csv']  # Test on P005 only
SEED: 42

NUM_WORKERS: 0  # 0 = no multiprocessing (easier to debug)
NUM_GPUS: []  # CPU only
WANDB: False
WANDB_KEY: '<Put wandb key here>'

DATASET: MultiPairSTFT
DATASET_ARGS:
  x_columns: [[RW_x, RW_y, RW_z, LW_x, LW_y, LW_z, RL_x, RL_y, RL_z, LL_x, LL_y, LL_z]]
  y_column: [label]
  padding_val: [0.0]
  sequence_length: [180_000]  # ULTRA SHORT: 1 hour for quick testing
  frame_shift: [null]
  normalize: [False]  # Skip normalization for speed
  force_norm_comp: [False]
  source_freq: [100]
  target_freq: [50]
  n_fft: [3000]  # MUST match LTA2V training (3000 = 1 minute at 50Hz)
  hop_length: [null]  # null = n_fft//2 (default behavior)
  stack_axes: [True]
  phase: [False]
  drop_labels: [[]]
  windowed_labels_kind: ['argmax']
  pairing_strategy: ['bilateral']

ALGORITHM: MultiPairDownstreamMLP
ALGORITHM_ARGS:
  epochs: [1]  # SINGLE EPOCH for smoke test
  batch_size: [1]
  loss: [CrossEntropyLoss]
  optimizer: [Adam]
  weight_decay: [0.0]
  learning_rate: [0.001]
  n_prediction_head_layers: [1]
  dim_prediction_head: [128]
  output_activation: [Identity]
  output_dim: [2]
  input_dim: [12]
  metrics: [[Accuracy, Recall, F1Score]]

  upstream_algorithm: [TransformerEncoderNetwork]
  upstream_model_path: [params/LTA2V_upstream/upstream_model.ckpt]
  rmv_upstream_layers: [1]
  weighted_sum_layer: [null]
  rmv_GPE: [True]
  fine_tune_step: [1.0]
  random_weight_init: [False]
  n_fft: [3000]
  hop_length: [1500]  # n_fft // 2

  val_after_nth_step: [10]

FOLDS: 0
TEST_SPLIT: null
SKIP_FINISHED_ARGS: False
STORE_CMATS: True
PROJ_NAME: 'MultiPair_Test'
EVAL_METRIC: 'average_f1score'
